# –ü–ª–∞–Ω –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ Poncho AI
## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π dev_manifest.md

**–î–∞—Ç–∞**: 2026-01-02
**–°—Ç–∞—Ç—É—Å**: –í –ø—Ä–æ—Ü–µ—Å—Å–µ
**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è**: 80/100 ‚Üí –¶–µ–ª—å 95/100

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ù–∞—Ä—É—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ï–ú–ï–î–õ–ï–ù–ù–û)

### 1. ‚ùå Rule 7: panic() –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
**–§–∞–π–ª**: `pkg/chain/config.go:199-208`
**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```go
func MustLoadChainFromYAML(data []byte) ChainYAMLConfig {
    cfg, err := LoadChainFromYAML(data)
    if err != nil {
        panic(err)  // ‚Üê VIOLATION
    }
    return cfg
}
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª–Ω–æ—Å—Ç—å—é
**–ü—Ä–∏—á–∏–Ω–∞**: –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π –∫–æ–¥ –≤ pkg/ –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∏–∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å panic
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `pkg/chain/config.go` - —É–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é

---

### 2. ‚ùå Rule 11: Hardcoded –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
**–§–∞–π–ª**: `cmd/debug-test/main.go:221`
**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```go
func getConfigPath() string {
    // ...
    return "/Users/ilkoid/dev/go/poncho-ai/config.yaml"  // ‚Üê VIOLATION
}
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `"config.yaml"`
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `cmd/debug-test/main.go` - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç

---

## ‚ö†Ô∏è –í—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≠–¢–ê –ù–ï–î–ï–õ–Ø)

### 3. ‚ö†Ô∏è Rule 0: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
**–§–∞–π–ª**: `cmd/chain-cli/config.go:45-178`
**–ü—Ä–æ–±–ª–µ–º–∞**: 133 —Å—Ç—Ä–æ–∫–∏ –¥—É–±–ª–∏—Ä—É—é—Ç `pkg/app/components.go`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```go
func createComponents(cfg *config.AppConfig, modelNameOverride string) (llm.Provider, *tools.Registry, *app.GlobalState, error) {
    // 133 —Å—Ç—Ä–æ–∫–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
}
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `appcomponents.Initialize()`
**–í—ã–≥–æ–¥–∞**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `cmd/chain-cli/config.go` - —É–¥–∞–ª–∏—Ç—å createComponents()
- `cmd/chain-cli/main.go` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å appcomponents

---

### 4. ‚ö†Ô∏è Rule 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Chain
**–§–∞–π–ª—ã**: `pkg/chain/config.go`, `pkg/config/config.go`, `config.yaml`

**–ü—Ä–æ–±–ª–µ–º–∞**: `ChainYAMLConfig` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ config.yaml

**–î–µ–π—Å—Ç–≤–∏–µ 1**: –î–æ–±–∞–≤–∏—Ç—å –≤ `config.yaml`:
```yaml
chains:
  default:
    type: "react"
    description: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è ReAct —Ü–µ–ø–æ—á–∫–∞"
    system_prompt: "You are a helpful AI assistant..."
    model: "glm-4.6"
    temperature: 0.5
    max_tokens: 2000
    max_iterations: 10
    timeout: "5m"
    prompts_dir: "./prompts"
    debug:
      enabled: false
      save_logs: true
      logs_dir: "./logs"
```

**–î–µ–π—Å—Ç–≤–∏–µ 2**: –î–æ–±–∞–≤–∏—Ç—å –≤ `pkg/config/config.go`:
```go
type AppConfig struct {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...

    // Chain configurations
    Chains map[string]chain.ChainYAMLConfig `yaml:"chains"`
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `config.yaml` - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é chains
- `pkg/config/config.go` - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ Chains

---

### 5. ‚ö†Ô∏è Rule 11: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è –ª–æ–≥–æ–≤
**–§–∞–π–ª**: `pkg/config/config.go:156-158`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥**:
```go
if result.LogsDir == "" {
    result.LogsDir = "./debug_logs"  // ‚Üê –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
}
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `os.Executable()` –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø—É—Ç–∏
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `pkg/config/config.go` - –æ–±–Ω–æ–≤–∏—Ç—å GetDefaults()

---

## üîß –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: 2 –ù–ï–î–ï–õ–ò)

### 6. üì¶ Rule 6: –ò–∑–≤–ª–µ—á—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
**–§–∞–π–ª**: `cmd/debug-test/main.go:224-250`

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–º–µ—à–∞–Ω—ã —Å entry point –ª–æ–≥–∏–∫–æ–π

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å `pkg/debug/fixtures.go`
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `pkg/debug/fixtures.go` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- `cmd/debug-test/main.go` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fixtures

---

### 7. üîç Rule 0: –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥–∞
**–§–∞–π–ª**: `cmd/debug-test/main.go:202-222`

**–ü—Ä–æ–±–ª–µ–º–∞**: –î—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –∏–∑ `pkg/app/components.go`

**–î–µ–π—Å—Ç–≤–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DefaultConfigPathFinder`
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `cmd/debug-test/main.go` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å finder

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ**
  - [ ] –£–¥–∞–ª–∏—Ç—å `MustLoadChainFromYAML()` –∏–∑ `pkg/chain/config.go`
  - [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å hardcoded –ø—É—Ç—å –≤ `cmd/debug-test/main.go`

- [ ] **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
  - [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `cmd/chain-cli` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `appcomponents`
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Chain –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config.yaml`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `pkg/config/config.go` —Å –ø–æ–ª–µ–º Chains
  - [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `LogsDir` –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π

- [ ] **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
  - [ ] –°–æ–∑–¥–∞—Ç—å `pkg/debug/fixtures.go`
  - [ ] –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥–∞

- [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞**
  - [ ] `go build ./cmd/poncho`
  - [ ] `go build ./cmd/chain-cli`
  - [ ] `go build ./cmd/debug-test`
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `./debug-test` –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ | –ü–æ—Å–ª–µ |
|-----------|-------|-------|
| Chain Pattern | 82/100 | 95/100 |
| Debug System | 92/100 | 95/100 |
| chain-cli | 75/100 | 92/100 |
| debug-test | 70/100 | 90/100 |
| **–û–±—â–µ–µ** | **80/100** | **93/100** |

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –ù–∏–∫–∞–∫–∏—Ö breaking changes –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö API
- –°–ª–µ–¥–æ–≤–∞—Ç—å 11 Immutable Rules –∏–∑ dev_manifest.md
- –ö–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω —Å–±–æ—Ä–∫–æ–π

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –≤—Å–µ—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ä–µ–¥–Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∞—É–¥–∏—Ç

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-01-02
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

# WB Analytics Funnel Demo

–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å **Wildberries Analytics API v3**.

## –ß—Ç–æ —ç—Ç–æ?

–≠—Ç–∞ —É—Ç–∏–ª–∏—Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ Wildberries —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π API v3:

- üìä **–í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂**: –ø—Ä–æ—Å–º–æ—Ç—Ä—ã ‚Üí –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –∑–∞–∫–∞–∑ ‚Üí –≤—ã–∫—É–ø/–æ—Ç–º–µ–Ω–∞
- üí∞ **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: —Å—É–º–º—ã –∑–∞–∫–∞–∑–æ–≤, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫
- üéØ **WB Club**: –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- üì¶ **–û—Å—Ç–∞—Ç–∫–∏**: –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö WB –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞
- ‚≠ê **–†–µ–π—Ç–∏–Ω–≥–∏**: —Ç–æ–≤–∞—Ä–∞ –∏ –æ—Ç–∑—ã–≤–æ–≤
- ‚è±Ô∏è **–í—Ä–µ–º—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
- üåç **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ—Ü–µ–Ω—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd examples/wb-funnel-demo
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Mock —Ä–µ–∂–∏–º (–±–µ–∑ API –∫–ª—é—á–∞)

```bash
go run main.go
```

> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç demo_key –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

### –†–µ–∞–ª—å–Ω—ã–π API

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á
export WB_API_KEY=your_real_wb_api_key

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Ç–∏–ª–∏—Ç—É
go run main.go
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

```bash
# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
WB_API_KEY=your_key go run main.go --nmIds 123456,789012

# –° –¥—Ä—É–≥–∏–º –ø–µ—Ä–∏–æ–¥–æ–º
WB_API_KEY=your_key go run main.go --nmIds 123456 --days 30
```

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
=== WB Analytics Funnel Demo (API v3) ===
üì¶ –¢–æ–≤–∞—Ä—ã: [123456 234567]
üìÖ –ü–µ—Ä–∏–æ–¥: 7 –¥–Ω–µ–π
üîë API Key: abc1...xyz9

‚è≥ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–ø—Ä–æ—Å –∫ WB API...

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:
======================================================================

üõçÔ∏è  –¢–û–í–ê–† #1
  nmID:        123456
  –ù–∞–∑–≤–∞–Ω–∏–µ:    Mock Product 123456
  –ë—Ä–µ–Ω–¥:       Mock Brand

  üìà –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂:
    –ü—Ä–æ—Å–º–æ—Ç—Ä—ã:        1256
    –í –∫–æ—Ä–∑–∏–Ω—É:        125
    –ó–∞–∫–∞–∑—ã:           41
    –í—ã–∫—É–ø—ã:           35
    –û—Ç–º–µ–Ω—ã:           6

  üìä –ö–æ–Ω–≤–µ—Ä—Å–∏–∏:
    –í –∫–æ—Ä–∑–∏–Ω—É:        9.9%
    –í –∑–∞–∫–∞–∑:          32.8%
    –í—ã–∫—É–ø–∞–µ–º–æ—Å—Ç—å:     85.4%

  üí∞ –§–∏–Ω–∞–Ω—Å—ã:
    –°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤:     61500
    –°—É–º–º–∞ –≤—ã–∫—É–ø–æ–≤:     52500
    –°—Ä–µ–¥–Ω–∏–π —á–µ–∫:       1500

  üéØ WB Club:
    –ó–∞–∫–∞–∑—ã:           20
    –í—ã–∫—É–ø–∞–µ–º–æ—Å—Ç—å:     85.0%

  üì¶ –û—Å—Ç–∞—Ç–∫–∏:
    –°–∫–ª–∞–¥ WB:         50
    –°–∫–ª–∞–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞:   20

  ‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏:
    –¢–æ–≤–∞—Ä–∞:           4.5
    –û—Ç–∑—ã–≤–æ–≤:          4.2

  ‚è±Ô∏è  –í—Ä–µ–º—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
    1 –¥–Ω–µ–π 8 —á–∞—Å–æ–≤ 30 –º–∏–Ω—É—Ç

======================================================================

‚úÖ –ì–æ—Ç–æ–≤–æ!
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
examples/wb-funnel-demo/
‚îú‚îÄ‚îÄ main.go       # –û—Å–Ω–æ–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞
‚îú‚îÄ‚îÄ config.yaml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md     # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## API v3 –ø—Ä–æ—Ç–∏–≤ API v2

| –ú–µ—Ç—Ä–∏–∫–∞ | API v2 | API v3 |
|---------|--------|--------|
| –ü—Ä–æ—Å–º–æ—Ç—Ä—ã | ‚úÖ | ‚úÖ |
| –ö–æ—Ä–∑–∏–Ω–∞ | ‚úÖ | ‚úÖ |
| –ó–∞–∫–∞–∑—ã | ‚úÖ | ‚úÖ |
| **–í—ã–∫—É–ø—ã** | ‚ùå | ‚úÖ |
| **–û—Ç–º–µ–Ω—ã** | ‚ùå | ‚úÖ |
| **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** | ‚ùå | ‚úÖ |
| **–°—É–º–º—ã –∑–∞–∫–∞–∑–æ–≤** | ‚ùå | ‚úÖ |
| **–°—Ä–µ–¥–Ω–∏–π —á–µ–∫** | ‚ùå | ‚úÖ |
| **WB Club** | ‚ùå | ‚úÖ |
| **–û—Å—Ç–∞—Ç–∫–∏** | ‚ùå | ‚úÖ |
| **–†–µ–π—Ç–∏–Ω–≥–∏** | ‚ùå | ‚úÖ |
| **–í—Ä–µ–º—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** | ‚ùå | ‚úÖ |
| **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** | ‚ùå | ‚úÖ |

## Rate Limiting

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: WB Analytics API –∏–º–µ–µ—Ç —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–º–∏—Ç—ã:

- **3 –∑–∞–ø—Ä–æ—Å–∞** –≤ –º–∏–Ω—É—Ç—É
- **20 —Å–µ–∫—É–Ω–¥** –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **3 –∑–∞–ø—Ä–æ—Å–∞** burst (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)

–£—Ç–∏–ª–∏—Ç–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç —ç—Ç–∏ –ª–∏–º–∏—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ß–µ—Ä–µ–∑ config.yaml

```yaml
wb:
  api_key: "your_api_key_here"

tools:
  get_wb_product_funnel:
    rate_limit: 3
    burst: 3
```

### –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export WB_API_KEY=your_api_key_here
```

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```bash
go run main.go --nmIds 123456 --days 1
```

### –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
‚ùå Tool execution failed: 401 Unauthorized
```

‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `WB_API_KEY`

### –û—à–∏–±–∫–∏ rate limit

```
‚ùå Tool execution failed: 429 Too Many Requests
```

‚Üí –ü–æ–¥–æ–∂–¥–∏—Ç–µ 20 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–£—Ç–∏–ª–∏—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Poncho AI:

- `pkg/wb.Client` ‚Äî HTTP –∫–ª–∏–µ–Ω—Ç —Å rate limiting
- `pkg/tools/std.WbProductFunnelTool` ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ—Ä–æ–Ω–∫–∏
- `config.yaml` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML

–°–æ–±–ª—é–¥–∞–µ—Ç—Å—è **Rule 9**: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `/examples`, –Ω–µ unit tests.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Poncho AI Documentation](../../../README.md)
- [WB Analytics API v3](https://seller-analytics-api.wildberries.ru)
- [Tool Interface](../../../pkg/tools/)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
